@page "/definition/{WordSlug}"
@inject HttpClient Http
@using System.Net

@code {
    [Parameter]
    public string? WordSlug { get; set; }
    private WordDefinition? definition;
    protected override async Task OnInitializedAsync()
    {
        var Word = WebUtility.UrlDecode(WordSlug).Replace("-", " ").Replace("__", "-");
        definition = await
        Http.GetFromJsonAsync<WordDefinition>($"https://clouddictionary.azurewebsites.net/api/GetDefinitionByWord?code=ZaYPEsrv8ycB83xO9TcjhsVl8F5fiCQ24xiBRP7mV0X9AzFuj4-_BQ==&word={Word}");

    }
}


@if (definition == null)
{
    <MudContainer Class="mt-16">
        <MudProgressLinear Color="MudBlazor.Color.Primary" Indeterminate="true" Class="my-4" />
    </MudContainer>
}
else
{

    <MudContainer Class="mt-16">
        <MudText Typo="Typo.h3" Align="Align.Center" GutterBottom="true">@definition.Word</MudText>


        <MudText Typo="Typo.h3" Align="Align.Center" GutterBottom="true">
            <MudChip Variant="Variant.Outlined" Color="Color.Secondary">@definition.Tag</MudChip>
        </MudText>

        <MudText Typo="Typo.body1" Class="my-5" Align="Align.Center">@definition.Content</MudText>


        <MudText Typo="Typo.h3" Align="Align.Center" GutterBottom="true">
            <MudLink Href="@($"{definition.Author.Link}")" Underline="Underline.Hover" Typo="Typo.subtitle1"
                Color="Color.Primary" Align="Align.Center">Submitted by: @definition.Author.Name</MudLink>
        </MudText>

        <MudText Typo="Typo.h3" Align="Align.Center" GutterBottom="true">
            <MudLink Href="@($"{definition.LearnMoreUrl}")" Underline="Underline.Hover" Typo="Typo.subtitle1"
                Color="Color.Info">Learn more</MudLink>
        </MudText>


    </MudContainer>

    <MudContainer Class="d-flex align-center justify-center mud-width-full" style="height:5vh;">
        <MudButton Href="https://github.com/learntocloud/cloud-dictionary/issues/new/choose" Target="_blank"
            Variant="Variant.Filled" EndIcon="@Icons.Custom.Brands.GitHub" Color="Color.Primary">
            Submit a Definition
        </MudButton>
    </MudContainer>
}




